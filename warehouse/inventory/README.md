### 更新后的 Inventory 模型说明文档

以下是根据最终的 `Inventory` 模型重新调整的说明文档，包括详细字段说明和状态流转过程的更新。

---

### **模型字段说明**

#### **基础字段**
| 字段名            | 类型         | 含义                                       |
|-------------------|--------------|--------------------------------------------|
| `goods_id`        | `Integer`    | 商品 ID，与 `Goods` 表关联                 |
| `total_stock`     | `Integer`    | 商品的总库存数量                           |
| `onhand_stock`    | `Integer`    | 可用库存，表示当前可立即分配的库存         |
| `damage_stock`    | `Integer`    | 损坏库存，表示已损坏且不可用的库存数量     |
| `return_stock`| `Integer`    | 延期订单库存，因库存不足未完成的订单数量   |

---

#### **收货相关字段**
| 字段名                 | 类型         | 含义                                       |
|------------------------|--------------|--------------------------------------------|
| `asn_stock`            | `Integer`    | ASN 库存，表示预计到达仓库但尚未正式签收的库存数量 |
| `received_stock`       | `Integer`    | 签收库存，已签收但尚未分拣的库存数量       |
| `sorted_stock` | `Integer`    | 分拣库存，分拣完成但尚未正式存放到库位的库存数量 |

---

#### **发货相关字段**
| 字段名           | 类型         | 含义                                       |
|------------------|--------------|--------------------------------------------|
| `dn_stock`       | `Integer`    | 待发货库存，发货单创建但尚未分配任务的数量 |
| `pick_stock`     | `Integer`    | 待拣选库存，分配了拣选任务但尚未完成的数量 |
| `picked_stock`   | `Integer`    | 已拣选库存，表示已完成拣选但尚未包装的库存 |
| `delivery_stock` | `Integer`    | 配送库存，表示已包装后待签收的库存数量    |

---

#### **其他字段**
| 字段名           | 类型         | 含义                                       |
|------------------|--------------|--------------------------------------------|
| `remark`          | `String`     | 商品库存备注，存放额外的备注信息           |
| `create_at`      | `DateTime`   | 创建时间                                   |
| `update_at`      | `DateTime`   | 更新时间                                   |

---

### **收货阶段状态流转**

```plaintext
ASN 创建 → ASN 库存 (`asn_stock`) 增加
到货确认 → ASN 库存 (`asn_stock`) 减少，签收库存 (`received_stock`) 增加
分拣完成 → 签收库存 (`received_stock`) 减少，分拣库存 (`sorted_stock`) 增加
上架完成 → 现有库存 (`sorted_stock`) 减少，现有库存 (`onhand_stock`) 增加
```

#### **示例**
- 收货单预计到货 100 件 → `asn_stock = 100`
- 到货确认 100 件 → `asn_stock = 0`，`received_stock = 100`
- 分拣完成 50 件 → `received_stock = 50`，`sorted_stock = 50`
- 上架完成 50 件 → `sorted_stock = 0`，`onhand_stock = 50`

---

### **发货阶段状态流转**

```plaintext
发货单创建 → DN 库存 (`dn_stock`) 增加
分配拣选任务 → DN 库存 (`dn_stock`) 减少，待拣选库存 (`pick_stock`) 增加
拣选完成 → 待拣选库存 (`pick_stock`) 减少，已拣选库存 (`picked_stock`) 增加
包装完成 → 已拣选库存 (`picked_stock`) 减少，配送库存 (`delivery_stock`) 增加
签收完成 → 配送库存 (`delivery_stock`) 减少
```

#### **示例**
- 发货单创建 100 件 → `dn_stock = 100`
- 分配拣选任务 100 件 → `dn_stock = 0`，`pick_stock = 100`
- 拣选完成 100 件 → `pick_stock = 0`，`picked_stock = 100`
- 包装完成 100 件 → `picked_stock = 0`，`delivery_stock = 100`
- 签收完成 100 件 → `delivery_stock = 0`

---

### **字段状态对比**

#### **收货相关字段**

| 字段名                 | 含义                                     | 示例场景                                   |
|------------------------|------------------------------------------|------------------------------------------|
| `asn_stock`            | 预计到货库存，未签收的数量               | ASN 创建时增加，到货确认时减少             |
| `received_stock`       | 签收库存，未分拣的数量                   | 到货确认时增加，分拣完成时减少             |
| `sorted_stock` | 分拣库存，未上架的数量                   | 分拣完成时增加，上架完成时减少             |

---

#### **发货相关字段**

| 字段名           | 含义                                     | 示例场景                                   |
|------------------|------------------------------------------|------------------------------------------|
| `dn_stock`       | 待发货库存，发货单创建的数量             | 发货单创建时增加，任务分配时减少           |
| `pick_stock`     | 待拣选库存，拣选任务分配的数量           | 分配拣选任务时增加，拣选完成时减少         |
| `picked_stock`   | 已拣选库存，拣选完成但未包装的数量       | 拣选完成时增加，包装完成时减少             |
| `delivery_stock` | 配送库存，包装完成但未签收的数量         | 包装完成时增加，签收完成时减少             |

---

### **总结**

- **`Inventory` 模型详细描述了库存在收货和发货阶段的状态流转**，每个字段对应明确的场景。
- **状态流转清晰**，通过库存字段变化反映真实业务操作。
- **字段设计优化**，去冗存简，确保模型扩展性和易维护性。