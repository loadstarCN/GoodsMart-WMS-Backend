### Putaway 模块

#### 模块描述
Putaway 模块用于管理仓库中的上架操作，记录商品从收货区移至存储库位的详细过程。通过该模块，可以追踪每一次上架的商品信息、库位、操作员以及上架数量。

---

#### 数据表结构

##### **PutawayRecord 表**

| 字段名称      | 数据类型      | 描述                            |
|---------------|---------------|---------------------------------|
| `id`          | `Integer`     | 主键                            |
| `goods_id`    | `Integer`     | 外键，关联商品（Goods）           |
| `location_id` | `Integer`     | 外键，关联库位（Location）         |
| `quantity`    | `Integer`     | 上架数量                          |
| `operator_id` | `Integer`     | 外键，关联操作员（User）           |
| `putaway_time`| `DateTime`    | 上架时间                          |
| `remark`       | `String`      | 备注信息                          |

---

#### API 接口说明

##### **Putaway Record 接口**

| HTTP 方法 | 路由               | 功能                  | 权限              |
|-----------|--------------------|-----------------------|-------------------|
| `GET`     | `/putaway/`        | 获取所有上架记录        | 需要登录           |
| `POST`    | `/putaway/`        | 创建新的上架记录        | `admin` 或 `settings` |
| `GET`     | `/putaway/<id>`    | 获取单个上架记录详情     | `admin` 或 `settings` |
| `PUT`     | `/putaway/<id>`    | 更新上架记录信息        | `admin` 或 `settings` |
| `DELETE`  | `/putaway/<id>`    | 删除上架记录            | `admin` 或 `settings` |

---

#### 数据流转示例

1. **商品到货**：
   - 商品到货后，操作员会进行验货和分拣操作。
   - 分拣完成后，生成对应的上架任务。

2. **上架操作**：
   - 操作员将商品从收货区移至指定存储库位。
   - 记录上架数量、库位和操作员。

3. **完成上架**：
   - 系统更新库存状态，将 `putaway_stock` 转移至 `onhand_stock`。

---

#### 状态流转图

```plaintext
商品分拣完成 → 上架任务创建
       ↓
上架操作执行 → 上架记录生成
       ↓
库存更新 → 从上架库存 (putaway_stock) 到现有库存 (onhand_stock)
```

---

#### 注意事项

1. **数据关联**：
   - **`goods_id`**：关联商品表，记录上架的具体商品信息。
   - **`location_id`**：关联库位表，记录商品的存储位置。
   - **`operator_id`**：关联用户表，记录执行上架操作的操作员信息。

2. **库存更新**：
   - 每次上架完成后，需更新库存模块中的 `putaway_stock` 和 `onhand_stock`。

3. **备注信息**：
   - `remark` 字段用于记录特殊的上架操作说明，例如商品特殊处理或库位调整。

---

#### 示例数据

##### **PutawayRecord 表**

| 字段名称      | 示例值         | 描述                     |
|---------------|----------------|--------------------------|
| `id`          | `1`            | 上架记录 ID              |
| `goods_id`    | `1001`         | 商品 ID                 |
| `location_id` | `2001`         | 库位 ID                 |
| `quantity`    | `50`           | 上架数量                |
| `operator_id` | `3`            | 执行上架操作的用户 ID     |
| `putaway_time`| `2025-01-10`   | 上架时间                |
| `remark`       | `上架完成`      | 备注信息                |

---

#### 模块优势

1. **精准追踪**：
   - 记录每一次上架的详细信息，确保仓库操作可追溯。

2. **数据可视化**：
   - 提供上架记录的查询接口，方便管理和审计。

3. **系统联动**：
   - 与库存模块无缝连接，实时更新库存数据，保持仓库管理高效准确。